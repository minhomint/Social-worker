<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ Overnight JangMinHo Live Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            min-height: 100vh;
        }
        .gradient-text {
            background: linear-gradient(to right, #14b8a6, #06b6d4, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .file-upload-zone {
            border: 2px dashed #14b8a6;
            transition: all 0.3s;
        }
        .file-upload-zone:hover {
            border-color: #0891b2;
            background: rgba(20, 184, 166, 0.05);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- ê³ ì • í—¤ë” -->
    <div class="sticky top-0 z-50 glass-effect border-b border-teal-200 shadow-xl">
        <div class="p-4">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                    <div class="bg-gradient-to-r from-teal-400 to-cyan-400 p-2 rounded-lg shadow-lg">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-base font-bold text-gray-800">ğŸµ Overnight Live</h1>
                        <p class="text-xs text-teal-600">11/8 PM7 â†’ 11/9 AM7</p>
                    </div>
                </div>
                
                <!-- ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ -->
                <button onclick="manualRefresh()" class="bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold py-2 px-3 md:px-4 rounded-lg shadow-lg hover:shadow-xl transition-all text-sm md:text-base">
                    ğŸ”„ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>

            <!-- ë·° ëª¨ë“œ ì „í™˜ -->
            <div class="flex gap-2 mb-3">
                <button id="cardViewBtn" onclick="setViewMode('card')" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-gradient-to-r from-teal-400 to-cyan-400 text-white shadow-lg">
                    ì¹´ë“œë·°
                </button>
                <button id="tableViewBtn" onclick="setViewMode('table')" class="flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-white text-gray-600 shadow">
                    í…Œì´ë¸”ë·°
                </button>
            </div>

            <!-- ìƒíƒœ í‘œì‹œ -->
            <div class="grid grid-cols-3 gap-2 mb-3">
                <div class="bg-gradient-to-br from-teal-50 to-cyan-50 border-2 border-teal-300 rounded-lg p-2 text-center shadow">
                    <div class="text-xs text-teal-700 font-semibold">ì—…ë°ì´íŠ¸</div>
                    <div class="text-xs md:text-sm font-black text-teal-600" id="lastUpdate">--:--</div>
                </div>
                <div class="bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-300 rounded-lg p-2 text-center shadow">
                    <div class="text-xs text-emerald-700 font-semibold">ì˜ìƒ ìˆ˜</div>
                    <div class="text-xs md:text-sm font-black text-emerald-600" id="videoCount">20</div>
                </div>
                <div class="bg-gradient-to-br from-rose-50 to-pink-50 border-2 border-rose-300 rounded-lg p-2 text-center shadow">
                    <div class="text-xs text-rose-700 font-semibold">ì´ ì¦ê°€</div>
                    <div class="text-xs md:text-sm font-black text-rose-600" id="totalChange">21,639</div>
                </div>
            </div>

            <!-- ì—°ê²° ìƒíƒœ -->
            <div class="text-center">
                <span id="connectionStatus" class="text-xs text-gray-500">ì¤€ë¹„ ì™„ë£Œ</span>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="p-4">
        <!-- PC: ì¢Œìš° 2ë‹¨ / ëª¨ë°”ì¼: ì„¸ë¡œ ìŠ¤íƒ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <!-- ì™¼ìª½: ì¬ìƒëª©ë¡ í”Œë ˆì´ì–´ (ëª¨ë°”ì¼ì—ì„œëŠ” ìœ„) -->
            <div class="lg:sticky lg:top-24 lg:self-start order-1 lg:order-1">
                <div class="glass-effect border-2 border-teal-300 rounded-2xl p-4 shadow-lg mb-4">
                    <h2 class="text-lg font-bold text-gray-800 mb-2">ğŸµ ì¬ìƒëª©ë¡</h2>
                    <p class="text-xs text-gray-600 mb-3">Overnight JangMinHo</p>
                    
                    <!-- YouTube í”Œë ˆì´ì–´ -->
                    <div id="player-container" class="relative bg-gray-900 rounded-2xl overflow-hidden" style="padding-bottom: 56.25%; height: 0;">
                        <div class="absolute inset-0 flex items-center justify-center text-white">
                            <div class="text-center">
                                <div class="pulse text-4xl mb-2">ğŸµ</div>
                                <p class="text-sm">í”Œë ˆì´ì–´ ë¡œë”© ì¤‘...</p>
                            </div>
                        </div>
                    </div>

                    <!-- í”Œë ˆì´ì–´ ì»¨íŠ¸ë¡¤ -->
                    <div class="mt-3 flex gap-2">
                        <button onclick="restartPlayer()" class="flex-1 bg-gradient-to-r from-emerald-500 to-green-500 text-white font-bold py-2 px-3 rounded-lg shadow hover:shadow-lg transition-all text-sm">
                            ğŸ”„ í”Œë ˆì´ì–´ ì¬ì‹œì‘
                        </button>
                        <button onclick="toggleMute()" class="bg-gradient-to-r from-purple-500 to-violet-500 text-white font-bold py-2 px-3 rounded-lg shadow hover:shadow-lg transition-all text-sm">
                            ğŸ”‡ ìŒì†Œê±°
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-2 text-center">â€» ìë™ì¬ìƒì´ ë©ˆì¶”ë©´ ì¬ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</p>
                </div>

                <!-- ì—‘ì…€ ë°ì´í„° ê´€ë¦¬ (ê´€ë¦¬ììš©) -->
                <div class="glass-effect border-2 border-purple-300 rounded-2xl p-4 shadow-lg">
                    <h2 class="text-lg font-bold text-gray-800 mb-2">ğŸ“Š ë°ì´í„° ê´€ë¦¬ (ê´€ë¦¬ì)</h2>
                    <p class="text-xs text-gray-600 mb-3">PM7/AM7 ì¡°íšŒìˆ˜ ì—‘ì…€ ê´€ë¦¬</p>
                    
                    <!-- ì—‘ì…€ ì—…ë¡œë“œ -->
                    <div class="file-upload-zone rounded-xl p-4 mb-3 text-center cursor-pointer" onclick="document.getElementById('excelFile').click()">
                        <input type="file" id="excelFile" accept=".xlsx,.xls" class="hidden" onchange="handleExcelUpload(event)">
                        <svg class="w-12 h-12 mx-auto text-teal-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <p class="text-sm font-semibold text-gray-700">ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ</p>
                        <p class="text-xs text-gray-500 mt-1">ì˜ìƒëª… | 8PM7 | 9AM7 í˜•ì‹</p>
                    </div>
                    
                    <div id="uploadStatus" class="text-xs text-center text-gray-500 mb-3">íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>

                    <!-- í˜„ì¬ ë°ì´í„° ë‹¤ìš´ë¡œë“œ -->
                    <button onclick="downloadExcelTemplate()" class="w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:shadow-xl transition-all mb-2">
                        ğŸ“¥ í˜„ì¬ ë°ì´í„° ì—‘ì…€ë¡œ ì €ì¥
                    </button>

                    <!-- Firebase ì €ì¥ (ë¹„ë°€ë²ˆí˜¸ í•„ìš”) -->
                    <button onclick="saveToFirebaseWithAuth()" class="w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:shadow-xl transition-all">
                        ğŸ”’ Firebase ì €ì¥ (ê´€ë¦¬ì)
                    </button>
                    
                    <p class="text-xs text-gray-500 mt-2 text-center">â€» Firebase ì €ì¥ì€ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤</p>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ì¡°íšŒìˆ˜ ì¶”ì  (ëª¨ë°”ì¼ì—ì„œëŠ” ì•„ë˜) -->
            <div class="order-2 lg:order-2">
                <div class="glass-effect border-2 border-teal-300 rounded-2xl p-4 shadow-lg mb-4">
                    <h2 class="text-lg font-bold text-gray-800 mb-2">ğŸ“Š ì¡°íšŒìˆ˜ ì¶”ì </h2>
                    <p class="text-xs text-gray-600">8ì¼ PM7 â†’ 9ì¼ AM7 ë³€í™”ëŸ‰ + ì‹¤ì‹œê°„</p>
                </div>

                <!-- ì¹´ë“œ ë·° -->
                <div id="cardView" class="space-y-3"></div>
                
                <!-- í…Œì´ë¸” ë·° -->
                <div id="tableView" class="hidden"></div>
            </div>
        </div>
    </div>

    <!-- YouTube IFrame Player API -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyBDOcjC6DNtM-8xQS6PNZqV7yAFq4PMCR8",
            authDomain: "always-88981.firebaseapp.com",
            projectId: "always-88981",
            storageBucket: "always-88981.firebasestorage.app",
            messagingSenderId: "915000956041",
            appId: "1:915000956041:web:490e0668c560aafd0e6258",
            measurementId: "G-WRWS6GGV8L",
            databaseURL: "https://always-88981-default-rtdb.firebaseio.com"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // YouTube API ì„¤ì •
        const YOUTUBE_API_KEY = 'AIzaSyBuoonh-2xdqGo8nQfrTEQBeNDfoL-udfU';
        const PLAYLIST_ID = 'PLfuYGpnnSBu24ryeO51pagt62smucmmGv';

        // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸
        const ADMIN_PASSWORD = '@minho0728';

        let currentViewMode = 'card';
        let videosData = [];
        let player = null;
        let playerReady = false;

        // Firebase í‚¤ ì´ë¦„ ì•ˆì „í•˜ê²Œ ë³€í™˜ (FirebaseëŠ” . # $ / [ ] ë¬¸ì ì‚¬ìš© ë¶ˆê°€)
        function encodeFirebaseKey(key) {
            return key
                .replace(/\./g, 'ï½¡')  // . â†’ ï½¡
                .replace(/#/g, 'ï¼ƒ')  // # â†’ ï¼ƒ
                .replace(/\$/g, 'ï¼„')  // $ â†’ ï¼„
                .replace(/\//g, 'ï¼')  // / â†’ ï¼
                .replace(/\[/g, 'ï¼»')  // [ â†’ ï¼»
                .replace(/\]/g, 'ï¼½'); // ] â†’ ï¼½
        }

        function decodeFirebaseKey(key) {
            return key
                .replace(/ï½¡/g, '.')
                .replace(/ï¼ƒ/g, '#')
                .replace(/ï¼„/g, '$')
                .replace(/ï¼/g, '/')
                .replace(/ï¼»/g, '[')
                .replace(/ï¼½/g, ']');
        }

        // ê°ì²´ì˜ ëª¨ë“  í‚¤ë¥¼ Firebase ì•ˆì „ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        function encodeObjectKeys(obj) {
            const encoded = {};
            for (const [key, value] of Object.entries(obj)) {
                encoded[encodeFirebaseKey(key)] = value;
            }
            return encoded;
        }

        // ì´ˆê¸° ê³ ì • ë°ì´í„° (11ì›” 8ì¼ PM7 / 11ì›” 9ì¼ AM7)
        let INITIAL_DATA = {
            '8PM7': {
                'í™€ë¡œëœ ì‚¬ë‘ (ì•ˆë¬´)': 60065,
                'ë‚´ê²Œ ë‚¨ì€ ì‚¬ë‘ì„ ë“œë¦´ê²Œìš”(OM)': 81065,
                'ì¥ë¯¼í˜¸ìœ íŠœë¸Œ ì‹œì‘ EP.00': 31225,
                'ì¥í•˜ë‹¤ ì¥ë¯¼í˜¸ EP.01': 33629,
                'í™€ë¡œëœì‚¬ë‘(OM )': 81037,
                'í™€ë¡œëœ ì‚¬ë‘': 58753,
                'í•œê³„ë ¹': 93128,
                'í•œê³„ë ¹ (OM )': 139011,
                'ë‚´ ë§ˆìŒì— ë¹„ì¹œ ë‚´ ëª¨ìŠµ': 148768,
                'ë‚´ ê³ì— ìˆì–´ì£¼ | ì•„ì™¸ë…¹ìŒì‹¤': 351825,
                'ë‚´ ê³ì— ìˆì–´ì£¼ (OM)': 149258,
                'ë‚´ ê³ì— ìˆì–´ì£¼': 41155,
                'ë‚´ê²Œ ë‚¨ì€ ì‚¬ë‘ì„ ë“œë¦´ê²Œìš”': 120249,
                'ê·¸ì € ì¹œêµ¬': 102779,
                'ê·¸ë‚ ': 78698,
                'ì‚¬ë‘ì˜ í‹°í‚¤íƒ€ì¹´ ìˆ˜íŠ¸ëŒ„ìŠ¤': 803843,
                'ëŒ€ê°€ìˆ˜ì™€ ëŒ€í˜•ê²¬ì˜ ë§Œë‚¨': 24456,
                'ëŒ€ìì—°ì—ì„œ ì¶¤ëŠ” í™€ë¡œëœ ì‚¬ë‘': 34153,
                'ìŠìœ¼ë¦¬ì˜¤': 337477,
                'ë‚´ ì´ë¦„ ì•„ì‹œì£ ': 8896970
            },
            '9AM7': {
                'í™€ë¡œëœ ì‚¬ë‘ (ì•ˆë¬´)': 61359,
                'ë‚´ê²Œ ë‚¨ì€ ì‚¬ë‘ì„ ë“œë¦´ê²Œìš”(OM)': 82475,
                'ì¥ë¯¼í˜¸ìœ íŠœë¸Œ ì‹œì‘ EP.00': 31659,
                'ì¥í•˜ë‹¤ ì¥ë¯¼í˜¸ EP.01': 34381,
                'í™€ë¡œëœì‚¬ë‘(OM )': 82253,
                'í™€ë¡œëœ ì‚¬ë‘': 59218,
                'í•œê³„ë ¹': 93548,
                'í•œê³„ë ¹ (OM )': 140479,
                'ë‚´ ë§ˆìŒì— ë¹„ì¹œ ë‚´ ëª¨ìŠµ': 150022,
                'ë‚´ ê³ì— ìˆì–´ì£¼ | ì•„ì™¸ë…¹ìŒì‹¤': 352192,
                'ë‚´ ê³ì— ìˆì–´ì£¼ (OM)': 150533,
                'ë‚´ ê³ì— ìˆì–´ì£¼': 41450,
                'ë‚´ê²Œ ë‚¨ì€ ì‚¬ë‘ì„ ë“œë¦´ê²Œìš”': 121686,
                'ê·¸ì € ì¹œêµ¬': 103670,
                'ê·¸ë‚ ': 79429,
                'ì‚¬ë‘ì˜ í‹°í‚¤íƒ€ì¹´ ìˆ˜íŠ¸ëŒ„ìŠ¤': 804213,
                'ëŒ€ê°€ìˆ˜ì™€ ëŒ€í˜•ê²¬ì˜ ë§Œë‚¨': 25490,
                'ëŒ€ìì—°ì—ì„œ ì¶¤ëŠ” í™€ë¡œëœ ì‚¬ë‘': 36839,
                'ìŠìœ¼ë¦¬ì˜¤': 338705,
                'ë‚´ ì´ë¦„ ì•„ì‹œì£ ': 8898779
            }
        };

        // YouTube IFrame Player API ì´ˆê¸°í™”
        window.onYouTubeIframeAPIReady = function() {
            createPlayer();
        };

        function createPlayer() {
            const container = document.getElementById('player-container');
            
            // ê¸°ì¡´ ë‚´ìš© ì œê±°
            container.innerHTML = '';
            
            // iframeì„ ë‹´ì„ div ìƒì„±
            const playerDiv = document.createElement('div');
            playerDiv.id = 'youtube-player';
            playerDiv.style.position = 'absolute';
            playerDiv.style.top = '0';
            playerDiv.style.left = '0';
            playerDiv.style.width = '100%';
            playerDiv.style.height = '100%';
            container.appendChild(playerDiv);
            
            player = new YT.Player('youtube-player', {
                height: '100%',
                width: '100%',
                playerVars: {
                    listType: 'playlist',
                    list: PLAYLIST_ID,
                    autoplay: 1,
                    loop: 1,
                    controls: 1,
                    modestbranding: 1,
                    rel: 0,
                    showinfo: 0,
                    iv_load_policy: 3,
                    playsinline: 1,
                    enablejsapi: 1,
                    origin: window.location.origin
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
        }

        function onPlayerReady(event) {
            playerReady = true;
            console.log('âœ… í”Œë ˆì´ì–´ ì¤€ë¹„ ì™„ë£Œ');
            
            // ìë™ ì¬ìƒ ì‹œì‘
            try {
                event.target.playVideo();
                event.target.setLoop(true);
                event.target.setShuffle(false);
                console.log('âœ… ìë™ ì¬ìƒ ì‹œì‘');
            } catch (e) {
                console.error('ìë™ ì¬ìƒ ì˜¤ë¥˜:', e);
            }

            // ì£¼ê¸°ì ìœ¼ë¡œ ì¬ìƒ ìƒíƒœ í™•ì¸ (3ë¶„ë§ˆë‹¤) - ì¬ìƒ ì¤‘ì¼ ë•ŒëŠ” ì•„ë¬´ê²ƒë„ ì•ˆ í•¨
            setInterval(() => {
                if (player && playerReady) {
                    const state = player.getPlayerState();
                    // ì¬ìƒ ì¤‘(1)ì´ ì•„ë‹ ë•Œë§Œ ì¬ìƒ ëª…ë ¹
                    if (state !== 1) {
                        console.log('ì¬ìƒ ì¬ê°œ ì‹œë„ (ìƒíƒœ:', state, ')');
                        try {
                            player.playVideo();
                        } catch (e) {
                            console.error('ì¬ìƒ ì¬ê°œ ì˜¤ë¥˜:', e);
                        }
                    }
                }
            }, 180000); // 3ë¶„
        }

        function onPlayerStateChange(event) {
            const states = {
                '-1': 'ì‹œì‘ì•ˆë¨',
                '0': 'ì¢…ë£Œ',
                '1': 'ì¬ìƒì¤‘',
                '2': 'ì¼ì‹œì •ì§€',
                '3': 'ë²„í¼ë§',
                '5': 'ë™ì˜ìƒì¤€ë¹„ì¤‘'
            };
            console.log('í”Œë ˆì´ì–´ ìƒíƒœ:', states[event.data] || event.data);

            // ì¢…ë£Œ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì¬ìƒ
            if (event.data === YT.PlayerState.ENDED) {
                setTimeout(() => {
                    try {
                        event.target.playVideo();
                    } catch (e) {
                        console.error('ì¬ìƒ ì¬ì‹œì‘ ì˜¤ë¥˜:', e);
                    }
                }, 1000);
            }
        }

        function onPlayerError(event) {
            console.error('í”Œë ˆì´ì–´ ì˜¤ë¥˜:', event.data);
            const container = document.getElementById('player-container');
            const errorMessages = {
                2: 'ì˜ëª»ëœ ë§¤ê°œë³€ìˆ˜',
                5: 'HTML5 í”Œë ˆì´ì–´ ì˜¤ë¥˜',
                100: 'ì˜ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŒ',
                101: 'ì˜ìƒ ì†Œìœ ìê°€ ì¬ìƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ',
                150: 'ì˜ìƒ ì†Œìœ ìê°€ ì¬ìƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ'
            };
            
            container.innerHTML = `
                <div class="absolute inset-0 flex items-center justify-center text-white bg-red-900/80">
                    <div class="text-center p-4">
                        <div class="text-4xl mb-2">âš ï¸</div>
                        <p class="text-sm font-bold mb-2">í”Œë ˆì´ì–´ ì˜¤ë¥˜ ë°œìƒ</p>
                        <p class="text-xs">${errorMessages[event.data] || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}</p>
                        <button onclick="restartPlayer()" class="mt-3 bg-white text-red-900 px-4 py-2 rounded-lg text-xs font-bold">
                            ì¬ì‹œë„
                        </button>
                    </div>
                </div>
            `;
        }

        // í”Œë ˆì´ì–´ ì¬ì‹œì‘
        window.restartPlayer = function() {
            console.log('í”Œë ˆì´ì–´ ì¬ì‹œì‘ ìš”ì²­...');
            
            if (player && playerReady) {
                try {
                    player.loadPlaylist({
                        listType: 'playlist',
                        list: PLAYLIST_ID
                    });
                    player.playVideo();
                    console.log('âœ… í”Œë ˆì´ì–´ ì¬ì‹œì‘ ì™„ë£Œ');
                    alert('âœ… í”Œë ˆì´ì–´ê°€ ì¬ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (e) {
                    console.error('í”Œë ˆì´ì–´ ì¬ì‹œì‘ ì˜¤ë¥˜:', e);
                    console.log('í”Œë ˆì´ì–´ ì¬ìƒì„± ì‹œë„...');
                    if (player && player.destroy) {
                        player.destroy();
                    }
                    setTimeout(createPlayer, 1000);
                }
            } else {
                console.log('í”Œë ˆì´ì–´ ìƒˆë¡œ ìƒì„±...');
                createPlayer();
            }
        };

        // ìŒì†Œê±° í† ê¸€
        let isMuted = false;
        window.toggleMute = function() {
            if (player && playerReady) {
                if (isMuted) {
                    player.unMute();
                    isMuted = false;
                    console.log('ğŸ”Š ìŒì†Œê±° í•´ì œ');
                } else {
                    player.mute();
                    isMuted = true;
                    console.log('ğŸ”‡ ìŒì†Œê±°');
                }
            } else {
                console.log('í”Œë ˆì´ì–´ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        };

        // ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        window.handleExcelUpload = function(event) {
            const file = event.target.files[0];
            if (!file) return;

            const statusDiv = document.getElementById('uploadStatus');
            statusDiv.textContent = 'íŒŒì¼ ì½ëŠ” ì¤‘...';
            statusDiv.className = 'text-xs text-center text-blue-600 mb-3 font-semibold';

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    const jsonData = XLSX.utils.sheet_to_json(firstSheet, { header: 1 });

                    // ë°ì´í„° íŒŒì‹± (ì²« í–‰ì€ í—¤ë”ë¡œ ê°€ì •)
                    const newData8PM7 = {};
                    const newData9AM7 = {};
                    
                    for (let i = 1; i < jsonData.length; i++) {
                        const row = jsonData[i];
                        if (row[0] && row[1] && row[2]) {
                            const videoName = String(row[0]).trim();
                            const pm7 = parseInt(row[1]);
                            const am7 = parseInt(row[2]);
                            
                            if (videoName && !isNaN(pm7) && !isNaN(am7)) {
                                newData8PM7[videoName] = pm7;
                                newData9AM7[videoName] = am7;
                            }
                        }
                    }

                    if (Object.keys(newData8PM7).length > 0) {
                        INITIAL_DATA['8PM7'] = newData8PM7;
                        INITIAL_DATA['9AM7'] = newData9AM7;
                        
                        statusDiv.textContent = `âœ… ${Object.keys(newData8PM7).length}ê°œ ì˜ìƒ ë°ì´í„° ì—…ë¡œë“œ ì™„ë£Œ!`;
                        statusDiv.className = 'text-xs text-center text-emerald-600 mb-3 font-bold';
                        
                        // ìë™ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨
                        setTimeout(() => {
                            loadPlaylistData();
                        }, 1000);
                    } else {
                        throw new Error('ìœ íš¨í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    }
                } catch (error) {
                    console.error('ì—‘ì…€ íŒŒì‹± ì˜¤ë¥˜:', error);
                    statusDiv.textContent = 'âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: ' + error.message;
                    statusDiv.className = 'text-xs text-center text-red-600 mb-3 font-semibold';
                }
            };

            reader.onerror = function() {
                statusDiv.textContent = 'âŒ íŒŒì¼ ì½ê¸° ì˜¤ë¥˜';
                statusDiv.className = 'text-xs text-center text-red-600 mb-3 font-semibold';
            };

            reader.readAsArrayBuffer(file);
            
            // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™”
            event.target.value = '';
        };

        // í˜„ì¬ ë°ì´í„°ë¥¼ ì—‘ì…€ë¡œ ë‹¤ìš´ë¡œë“œ
        window.downloadExcelTemplate = function() {
            const statusDiv = document.getElementById('uploadStatus');
            statusDiv.textContent = 'ì—‘ì…€ íŒŒì¼ ìƒì„± ì¤‘...';
            statusDiv.className = 'text-xs text-center text-blue-600 mb-3 font-semibold pulse';

            try {
                const data = [['ì˜ìƒëª…', '8PM7', '9AM7', 'ì¦ê°']];
                
                for (const [title, pm7] of Object.entries(INITIAL_DATA['8PM7'])) {
                    const am7 = INITIAL_DATA['9AM7'][title] || 0;
                    const change = am7 - pm7;
                    data.push([title, pm7, am7, change]);
                }

                const ws = XLSX.utils.aoa_to_sheet(data);
                
                // ì—´ ë„ˆë¹„ ì„¤ì •
                ws['!cols'] = [
                    {wch: 40},  // ì˜ìƒëª…
                    {wch: 12},  // 8PM7
                    {wch: 12},  // 9AM7
                    {wch: 12}   // ì¦ê°
                ];
                
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, 'Overnight Data');
                
                const now = new Date();
                const filename = `overnight_data_${now.getMonth()+1}ì›”${now.getDate()}ì¼_${now.getHours()}ì‹œ${now.getMinutes()}ë¶„.xlsx`;
                XLSX.writeFile(wb, filename);
                
                statusDiv.textContent = `âœ… ì—‘ì…€ ì €ì¥ ì™„ë£Œ! (${filename})`;
                statusDiv.className = 'text-xs text-center text-emerald-600 mb-3 font-bold';
                
                setTimeout(() => {
                    statusDiv.textContent = 'íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
                    statusDiv.className = 'text-xs text-center text-gray-500 mb-3';
                }, 3000);
            } catch (error) {
                console.error('ì—‘ì…€ ì €ì¥ ì˜¤ë¥˜:', error);
                statusDiv.textContent = 'âŒ ì—‘ì…€ ì €ì¥ ì‹¤íŒ¨: ' + error.message;
                statusDiv.className = 'text-xs text-center text-red-600 mb-3 font-semibold';
            }
        };

        // Firebase ì €ì¥ (ë¹„ë°€ë²ˆí˜¸ ì¸ì¦)
        window.saveToFirebaseWithAuth = async function() {
            if (videosData.length === 0) {
                alert('ì €ì¥í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.');
                return;
            }

            // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
            const password = prompt('ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
            if (!password) {
                return; // ì·¨ì†Œí•œ ê²½ìš°
            }
            
            if (password !== ADMIN_PASSWORD) {
                alert('âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            const statusDiv = document.getElementById('uploadStatus');
            statusDiv.textContent = 'Firebase ì €ì¥ ì¤‘...';
            statusDiv.className = 'text-xs text-center text-blue-600 mb-3 font-semibold pulse';

            try {
                const now = new Date();
                const timestamp = Date.now();
                
                // Firebase ì•ˆì „í•œ í‚¤ë¡œ ë³€í™˜
                const safeInitialData = {
                    '8PM7': encodeObjectKeys(INITIAL_DATA['8PM7']),
                    '9AM7': encodeObjectKeys(INITIAL_DATA['9AM7'])
                };
                
                const dataToSave = {
                    timestamp: now.toISOString(),
                    savedAt: `${now.getMonth()+1}ì›” ${now.getDate()}ì¼ ${now.getHours()}ì‹œ ${now.getMinutes()}ë¶„`,
                    videos: videosData,
                    initialData: safeInitialData,
                    totalVideos: videosData.length,
                    totalChange: videosData.filter(v => v.change !== null).reduce((sum, v) => sum + v.change, 0)
                };
                
                console.log('Firebase ì €ì¥ ì‹œì‘...', dataToSave);
                
                // ìŠ¤ëƒ…ìƒ· ì €ì¥
                await set(ref(database, 'overnight/snapshots/' + timestamp), dataToSave);
                console.log('ìŠ¤ëƒ…ìƒ· ì €ì¥ ì™„ë£Œ');
                
                // ìµœì‹  ë°ì´í„°ë¡œ ì €ì¥
                await set(ref(database, 'overnight/latest'), dataToSave);
                console.log('latest ì €ì¥ ì™„ë£Œ');
                
                statusDiv.textContent = `âœ… Firebase ì €ì¥ ì™„ë£Œ! (${dataToSave.savedAt})`;
                statusDiv.className = 'text-xs text-center text-emerald-600 mb-3 font-bold';
                
                updateStatus('âœ“ Firebase ì €ì¥ ì™„ë£Œ', 'text-emerald-600');
                alert(`âœ… Firebase ì €ì¥ ì™„ë£Œ!\n\nì‹œê°„: ${dataToSave.savedAt}\nì˜ìƒ ìˆ˜: ${videosData.length}ê°œ\nì´ ì¦ê°€: ${dataToSave.totalChange.toLocaleString()}`);
                
                setTimeout(() => {
                    statusDiv.textContent = 'íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
                    statusDiv.className = 'text-xs text-center text-gray-500 mb-3';
                }, 5000);
                
            } catch (error) {
                console.error('Firebase ì €ì¥ ì˜¤ë¥˜:', error);
                statusDiv.textContent = 'âŒ Firebase ì €ì¥ ì‹¤íŒ¨: ' + error.message;
                statusDiv.className = 'text-xs text-center text-red-600 mb-3 font-semibold';
                alert('âŒ Firebase ì €ì¥ ì‹¤íŒ¨:\n' + error.message + '\n\nì½˜ì†”(F12)ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        };

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus(message, color = 'text-teal-600') {
            const status = document.getElementById('connectionStatus');
            status.textContent = message;
            status.className = `text-xs font-semibold ${color}`;
        }

        // ì‹œê°„ í¬ë§·
        function formatTime(date) {
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }

        // ì œëª© ì •ê·œí™” (ë¹„êµìš©)
        function normalizeTitle(title) {
            return title.toLowerCase()
                .replace(/\s+/g, '')
                .replace(/[()|\[\]]/g, '')
                .replace(/official/gi, '')
                .replace(/mv/gi, '')
                .replace(/ì¥ë¯¼í˜¸/g, '')
                .replace(/jangminho/gi, '');
        }

        // ì¬ìƒëª©ë¡ ë¹„ë””ì˜¤ ê°€ì ¸ì˜¤ê¸°
        async function fetchPlaylistVideos() {
            updateStatus('ì¬ìƒëª©ë¡ ë¡œë”© ì¤‘...', 'text-blue-600 pulse');
            
            try {
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${PLAYLIST_ID}&key=${YOUTUBE_API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('API ìš”ì²­ ì‹¤íŒ¨: ' + response.status);
                }
                
                const data = await response.json();
                return data.items;
            } catch (error) {
                console.error('ì¬ìƒëª©ë¡ ë¡œë”© ì˜¤ë¥˜:', error);
                updateStatus('âŒ ì¬ìƒëª©ë¡ ë¡œë”© ì‹¤íŒ¨', 'text-red-600');
                return [];
            }
        }

        // ë¹„ë””ì˜¤ í†µê³„ ê°€ì ¸ì˜¤ê¸°
        async function fetchVideoStats(videoIds) {
            updateStatus('ì¡°íšŒìˆ˜ ìˆ˜ì§‘ ì¤‘...', 'text-blue-600 pulse');
            
            try {
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${videoIds.join(',')}&key=${YOUTUBE_API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('API ìš”ì²­ ì‹¤íŒ¨: ' + response.status);
                }
                
                const data = await response.json();
                return data.items;
            } catch (error) {
                console.error('ì¡°íšŒìˆ˜ ìˆ˜ì§‘ ì˜¤ë¥˜:', error);
                updateStatus('âŒ ì¡°íšŒìˆ˜ ìˆ˜ì§‘ ì‹¤íŒ¨', 'text-red-600');
                return [];
            }
        }

        // ì „ì²´ ë°ì´í„° ë¡œë“œ
        async function loadPlaylistData() {
            const playlistItems = await fetchPlaylistVideos();
            
            if (playlistItems.length === 0) {
                return;
            }
            
            const videoIds = playlistItems.map(item => item.snippet.resourceId.videoId);
            const videoStats = await fetchVideoStats(videoIds);
            
            if (videoStats.length > 0) {
                videosData = videoStats.map(item => {
                    const videoId = item.id;
                    const title = item.snippet.title;
                    const realtime = parseInt(item.statistics.viewCount);
                    
                    // ê³ ì • ë°ì´í„°ì—ì„œ ë§¤ì¹­ë˜ëŠ” ì œëª© ì°¾ê¸°
                    let pm7 = null;
                    let am7 = null;
                    let matchedKey = null;
                    
                    const normalizedTitle = normalizeTitle(title);
                    
                    for (const [key, value] of Object.entries(INITIAL_DATA['8PM7'])) {
                        const normalizedKey = normalizeTitle(key);
                        if (normalizedTitle.includes(normalizedKey) || normalizedKey.includes(normalizedTitle)) {
                            pm7 = value;
                            am7 = INITIAL_DATA['9AM7'][key];
                            matchedKey = key;
                            break;
                        }
                    }
                    
                    // ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ null ìœ ì§€
                    const change = (pm7 !== null && am7 !== null) ? (am7 - pm7) : null;
                    
                    return {
                        videoId: videoId,
                        title: title,
                        pm7: pm7,
                        am7: am7,
                        realtime: realtime,
                        change: change,
                        matchedKey: matchedKey,
                        timestamp: new Date().toISOString()
                    };
                });
                
                // ì˜ìƒ ìˆ˜ ì—…ë°ì´íŠ¸
                document.getElementById('videoCount').textContent = videosData.length;
                
                // ì´ ì¦ê°€ëŸ‰ ê³„ì‚°
                const totalChange = videosData
                    .filter(v => v.change !== null)
                    .reduce((sum, v) => sum + v.change, 0);
                document.getElementById('totalChange').textContent = totalChange.toLocaleString();
                
                // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„
                const now = new Date();
                document.getElementById('lastUpdate').textContent = formatTime(now);
                
                updateStatus('âœ“ ì—…ë°ì´íŠ¸ ì™„ë£Œ', 'text-emerald-600');
                renderView();
            }
        }

        // ë·° ë Œë”ë§
        function renderView() {
            const sorted = [...videosData].sort((a, b) => {
                if (a.change === null && b.change === null) return 0;
                if (a.change === null) return 1;
                if (b.change === null) return -1;
                return b.change - a.change;
            });

            if (currentViewMode === 'card') {
                renderCardView(sorted);
            } else {
                renderTableView(sorted);
            }
        }

        // ì¹´ë“œ ë·° ë Œë”ë§
        function renderCardView(videos) {
            const cardView = document.getElementById('cardView');
            
            cardView.innerHTML = videos.map((video, index) => {
                const rankIcon = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `${index + 1}`;
                const changeColor = video.change === null ? 'text-gray-400' : 
                                   video.change > 0 ? 'text-emerald-600' : 
                                   video.change < 0 ? 'text-red-600' : 'text-gray-600';
                const changeSign = video.change === null ? '' : video.change > 0 ? '+' : '';
                
                const pm7Display = video.pm7 !== null ? video.pm7.toLocaleString() : '-';
                const am7Display = video.am7 !== null ? video.am7.toLocaleString() : '-';
                const changeDisplay = video.change !== null ? `${changeSign}${video.change.toLocaleString()}` : '-';
                
                return `
                    <div class="glass-effect border-2 border-teal-200 rounded-2xl p-3 md:p-4 shadow-lg hover:shadow-xl transition-all">
                        <div class="flex items-start gap-2 md:gap-3 mb-3">
                            <div class="text-xl md:text-2xl flex-shrink-0">${rankIcon}</div>
                            <div class="flex-1 min-w-0">
                                <h3 class="font-bold text-gray-800 text-sm md:text-base line-clamp-2">${video.title}</h3>
                                ${video.matchedKey ? `<p class="text-xs text-gray-500 mt-1">ğŸ“Š ${video.matchedKey}</p>` : '<p class="text-xs text-orange-500 mt-1">âš ï¸ í‘œ ë°ì´í„° ì—†ìŒ</p>'}
                            </div>
                        </div>

                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <div class="bg-gradient-to-br from-purple-50 to-violet-50 rounded-lg p-2 md:p-3 border-2 border-purple-200 shadow text-center">
                                <div class="text-xs text-purple-600 mb-1 font-semibold">8ì¼ PM7</div>
                                <div class="text-xs md:text-sm font-bold text-purple-700">${pm7Display}</div>
                            </div>
                            <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-2 md:p-3 border-2 border-blue-200 shadow text-center">
                                <div class="text-xs text-blue-600 mb-1 font-semibold">9ì¼ AM7</div>
                                <div class="text-xs md:text-sm font-bold text-blue-700">${am7Display}</div>
                            </div>
                            <div class="bg-gradient-to-br from-emerald-50 to-green-50 rounded-lg p-2 md:p-3 border-2 border-emerald-300 shadow text-center">
                                <div class="text-xs text-emerald-600 mb-1 font-semibold">ì¦ê°</div>
                                <div class="text-xs md:text-sm font-bold ${changeColor}">${changeDisplay}</div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-3 md:p-4 border-2 border-teal-300 shadow">
                            <div class="text-center">
                                <div class="text-xs font-semibold text-gray-600 mb-2">ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜</div>
                                <div class="text-2xl md:text-3xl font-black gradient-text">
                                    ${video.realtime.toLocaleString()}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            cardView.classList.remove('hidden');
            document.getElementById('tableView').classList.add('hidden');
        }

        // í…Œì´ë¸” ë·° ë Œë”ë§
        function renderTableView(videos) {
            const tableView = document.getElementById('tableView');
            
            tableView.innerHTML = `
                <div class="glass-effect border-2 border-teal-200 rounded-2xl overflow-hidden shadow-lg">
                    <div class="bg-gradient-to-r from-teal-100 to-cyan-100 border-b-2 border-teal-300 p-3 grid grid-cols-5 gap-2 text-xs font-bold text-gray-700">
                        <div>ì˜ìƒëª…</div>
                        <div class="text-right">8ì¼ PM7</div>
                        <div class="text-right">9ì¼ AM7</div>
                        <div class="text-right text-emerald-700">ì¦ê°</div>
                        <div class="text-right text-teal-700">ì‹¤ì‹œê°„</div>
                    </div>
                    <div>
                        ${videos.map((video, index) => {
                            const rankIcon = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `${index + 1}`;
                            const changeColor = video.change === null ? 'text-gray-400' :
                                               video.change > 0 ? 'text-emerald-700' : 
                                               video.change < 0 ? 'text-red-700' : 'text-gray-700';
                            const changeSign = video.change === null ? '' : video.change > 0 ? '+' : '';
                            
                            const pm7Display = video.pm7 !== null ? video.pm7.toLocaleString() : '-';
                            const am7Display = video.am7 !== null ? video.am7.toLocaleString() : '-';
                            const changeDisplay = video.change !== null ? `${changeSign}${video.change.toLocaleString()}` : '-';
                            
                            return `
                                <div class="p-2 md:p-3 border-b border-teal-100 ${index < 3 && video.change !== null ? 'bg-teal-50/50' : 'bg-white/50'} hover:bg-teal-50 transition-all">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-base md:text-lg">${rankIcon}</span>
                                        <span class="text-gray-800 text-xs md:text-sm font-semibold flex-1 line-clamp-1">
                                            ${video.title}
                                        </span>
                                    </div>
                                    ${video.matchedKey ? `<div class="text-xs text-gray-500 mb-2">ğŸ“Š ${video.matchedKey}</div>` : '<div class="text-xs text-orange-500 mb-2">âš ï¸ í‘œ ë°ì´í„° ì—†ìŒ</div>'}
                                    <div class="grid grid-cols-4 gap-2 text-xs">
                                        <div class="text-right">
                                            <div class="text-purple-600 mb-0.5 font-semibold">8ì¼ PM7</div>
                                            <div class="text-purple-700 font-mono font-bold">${pm7Display}</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-blue-600 mb-0.5 font-semibold">9ì¼ AM7</div>
                                            <div class="text-blue-700 font-mono font-bold">${am7Display}</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="${changeColor} mb-0.5 font-semibold">ì¦ê°</div>
                                            <div class="${changeColor} font-mono font-black">${changeDisplay}</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-teal-600 mb-0.5 font-semibold">ì‹¤ì‹œê°„</div>
                                            <div class="text-teal-700 font-mono font-black">${video.realtime.toLocaleString()}</div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
            
            tableView.classList.remove('hidden');
            document.getElementById('cardView').classList.add('hidden');
        }

        // ë·° ëª¨ë“œ ë³€ê²½
        window.setViewMode = function(mode) {
            currentViewMode = mode;
            
            const cardBtn = document.getElementById('cardViewBtn');
            const tableBtn = document.getElementById('tableViewBtn');
            
            if (mode === 'card') {
                cardBtn.className = 'flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-gradient-to-r from-teal-400 to-cyan-400 text-white shadow-lg';
                tableBtn.className = 'flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-white text-gray-600 shadow';
            } else {
                cardBtn.className = 'flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-white text-gray-600 shadow';
                tableBtn.className = 'flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-all bg-gradient-to-r from-teal-400 to-cyan-400 text-white shadow-lg';
            }
            
            if (videosData.length > 0) {
                renderView();
            }
        };

        // ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨
        window.manualRefresh = async function() {
            await loadPlaylistData();
        };

        // ì´ˆê¸°í™”
        async function initialize() {
            updateStatus('ì´ˆê¸°í™” ì¤‘...', 'text-blue-600');
            await loadPlaylistData();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        initialize();
    </script>
</body>
</html>
